{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nlet userSelectedDate = {};\nlet counterId = 0;\n\nconst startBtn = document.querySelector('.start-btn')\nconst timer = document.querySelectorAll('.value')\nconst dataField = document.querySelector('#datetime-picker')\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n      if (selectedDates[0].getTime() > Date.now()) {\n        userSelectedDate = selectedDates[0];\n        \n        //стили для активной кнопки Старт\n        startBtn.classList.remove('disabled')\n        startBtn.classList.add('active')\n        startBtn.disabled = false\n\n        //show preview of remaining time\n        showRemainingTime(userSelectedDate)\n      } else {\n        iziToast.show({\n          class: 'toast-message',\n          title: 'Error',\n          titleColor: '#fff',\n          message: 'Please choose a date in the future',\n          messageColor: '#fff',\n          iconUrl: 'img/error-icon.svg',\n          iconColor: '#fff',\n          backgroundColor: '#EF4040',\n          border: '2px solid #FFBEBE',\n          position: 'topRight',\n        });\n\n        //стили для неактивной кнопки Старт\n        startBtn.classList.remove('active')\n        startBtn.classList.add('disabled')\n        startBtn.disabled = true\n      }\n    },\n};\n\nfunction convertMs(ms) {\n    // Number of milliseconds per unit of time\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n  \n    // Remaining days\n    const days = Math.floor(ms / day);\n    // Remaining hours\n    const hours = Math.floor((ms % day) / hour);\n    // Remaining minutes\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    // Remaining seconds\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  \n    return { days, hours, minutes, seconds };\n}  \n\nflatpickr(\"#datetime-picker\", options);\n\nstartBtn.addEventListener('click', timerStart)\nfunction timerStart() {\n    if (startBtn.classList.contains('disabled')) {\n        return;\n    }\n    dataField.classList.add('disabled')\n    dataField.disabled = true;\n    startBtn.disabled = true;\n    startBtn.classList.add('disabled')\n    startBtn.classList.remove('active')\n    showRemainingTime(userSelectedDate)\n    counterId = setInterval(showRemainingTime, 1000, userSelectedDate);\n}\n\nfunction showRemainingTime(date) {\n    const remainingMs = date.getTime() - Date.now();\n    if (remainingMs <= 0) {\n      console.log('its time')\n      clearInterval(counterId)\n      dataField.classList.remove('disabled')\n      dataField.disabled = false\n      startBtn.disabled = false\n      startBtn.classList.remove('disabled')\n      startBtn.classList.add('active')\n      return\n    }\n    \n    const remainingTime = new RemainingTime( convertMs(remainingMs) );\n    \n    timer[0].innerHTML = remainingTime.formatingOutput(\"days\");\n    timer[1].innerHTML = remainingTime.formatingOutput(\"hours\");\n    timer[2].innerHTML = remainingTime.formatingOutput(\"minutes\");\n    timer[3].innerHTML = remainingTime.formatingOutput(\"seconds\"); \n    \n    // timer[0].innerHTML = remainingTime.days.padStart(2, '0'); easy way, no need class and method then\n    // timer[1].innerHTML = remainingTime.hours.padStart(2, '0'); \n    // timer[2].innerHTML = remainingTime.minutes.padStart(2, '0');\n    // timer[3].innerHTML = remainingTime.seconds.padStart(2, '0');\n}\n\nclass RemainingTime {\n  constructor(params) {\n    this.days = params.days;\n    this.hours = params.hours;\n    this.minutes = params.minutes;\n    this.seconds = params.seconds;\n  }\n\n  formatingOutput(value) {\n    if (this[value] < 10) {\n      return `0${this[value]}`\n    } else {\n      return this[value]\n    }\n  }\n};"],"names":["userSelectedDate","counterId","startBtn","timer","dataField","options","selectedDates","showRemainingTime","iziToast","convertMs","ms","days","hours","minutes","seconds","flatpickr","timerStart","date","remainingMs","remainingTime","RemainingTime","params","value"],"mappings":"0IAMA,IAAIA,EAAmB,CAAA,EACnBC,EAAY,EAEhB,MAAMC,EAAW,SAAS,cAAc,YAAY,EAC9CC,EAAQ,SAAS,iBAAiB,QAAQ,EAC1CC,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACjBA,EAAc,CAAC,EAAE,QAAO,EAAK,KAAK,OACpCN,EAAmBM,EAAc,CAAC,EAGlCJ,EAAS,UAAU,OAAO,UAAU,EACpCA,EAAS,UAAU,IAAI,QAAQ,EAC/BA,EAAS,SAAW,GAGpBK,EAAkBP,CAAgB,IAElCQ,EAAS,KAAK,CACZ,MAAO,gBACP,MAAO,QACP,WAAY,OACZ,QAAS,qCACT,aAAc,OACd,QAAS,qBACT,UAAW,OACX,gBAAiB,UACjB,OAAQ,oBACR,SAAU,UACpB,CAAS,EAGDN,EAAS,UAAU,OAAO,QAAQ,EAClCA,EAAS,UAAU,IAAI,UAAU,EACjCA,EAAS,SAAW,GAEvB,CACL,EAEA,SAASO,EAAUC,EAAI,CAQnB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAC1C,CAEAC,EAAU,mBAAoBV,CAAO,EAErCH,EAAS,iBAAiB,QAASc,CAAU,EAC7C,SAASA,GAAa,CACdd,EAAS,UAAU,SAAS,UAAU,IAG1CE,EAAU,UAAU,IAAI,UAAU,EAClCA,EAAU,SAAW,GACrBF,EAAS,SAAW,GACpBA,EAAS,UAAU,IAAI,UAAU,EACjCA,EAAS,UAAU,OAAO,QAAQ,EAClCK,EAAkBP,CAAgB,EAClCC,EAAY,YAAYM,EAAmB,IAAMP,CAAgB,EACrE,CAEA,SAASO,EAAkBU,EAAM,CAC7B,MAAMC,EAAcD,EAAK,QAAS,EAAG,KAAK,IAAG,EAC7C,GAAIC,GAAe,EAAG,CACpB,QAAQ,IAAI,UAAU,EACtB,cAAcjB,CAAS,EACvBG,EAAU,UAAU,OAAO,UAAU,EACrCA,EAAU,SAAW,GACrBF,EAAS,SAAW,GACpBA,EAAS,UAAU,OAAO,UAAU,EACpCA,EAAS,UAAU,IAAI,QAAQ,EAC/B,MACD,CAED,MAAMiB,EAAgB,IAAIC,EAAeX,EAAUS,CAAW,CAAC,EAE/Df,EAAM,CAAC,EAAE,UAAYgB,EAAc,gBAAgB,MAAM,EACzDhB,EAAM,CAAC,EAAE,UAAYgB,EAAc,gBAAgB,OAAO,EAC1DhB,EAAM,CAAC,EAAE,UAAYgB,EAAc,gBAAgB,SAAS,EAC5DhB,EAAM,CAAC,EAAE,UAAYgB,EAAc,gBAAgB,SAAS,CAMhE,CAEA,MAAMC,CAAc,CAClB,YAAYC,EAAQ,CAClB,KAAK,KAAOA,EAAO,KACnB,KAAK,MAAQA,EAAO,MACpB,KAAK,QAAUA,EAAO,QACtB,KAAK,QAAUA,EAAO,OACvB,CAED,gBAAgBC,EAAO,CACrB,OAAI,KAAKA,CAAK,EAAI,GACT,IAAI,KAAKA,CAAK,CAAC,GAEf,KAAKA,CAAK,CAEpB,CACH"}